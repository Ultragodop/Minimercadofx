<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<!--
  Este FXML coincide con el ChatController que inyecta:
    - @FXML ScrollPane scrollPane
    - @FXML VBox mensajesContainer
    - @FXML TextArea TextArea
  y llama al método enviarMensaje() en el botón.
-->

<VBox spacing="0" styleClass="chat-root" stylesheets="@styles/chat.css" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.project.minimercadofx.controllers.ChatController">

    <children>
        <!-- 1) Cabecera fija -->
        <Label alignment="CENTER" maxWidth="Infinity" styleClass="header" text="Chat entre bellakos cifrada de extremo a extremo" />

        <!-- 2) Área de mensajes (ScrollPane que crece con la ventana) -->
        <ScrollPane fx:id="scrollPane" fitToWidth="true" hbarPolicy="NEVER" pannable="false" styleClass="message-pane" stylesheets="@styles/chat.css" vbarPolicy="AS_NEEDED" VBox.vgrow="ALWAYS">
            <content>
                <VBox fx:id="mensajesContainer" spacing="5" styleClass="mensajes-vbox" stylesheets="@styles/chat.css">
                    <padding>
                        <Insets bottom="10" left="10" right="10" top="10" />
                    </padding>
                </VBox>
            </content>
        </ScrollPane>

        <!-- 3) HBox de entrada de texto (siempre pegada al fondo) -->
        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="input-area">
            <padding>
                <Insets bottom="10" left="10" right="10" top="10" />
            </padding>

            <!-- TextArea para la entrada, con HBox.hgrow para ser responsivo -->
            <TextArea fx:id="TextArea" prefRowCount="2" promptText="Escribe un mensaje..." styleClass="text-input" wrapText="true" HBox.hgrow="ALWAYS" />

            <!-- Botón que invoca al método enviarMensaje() -->
            <Button onAction="#enviarMensaje" styleClass="send-button" text="Enviar" />
        </HBox>
    </children>
</VBox>
